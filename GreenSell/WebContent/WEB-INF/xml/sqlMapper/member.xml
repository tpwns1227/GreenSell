<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="member">

	<insert id="insert" parameterType="com.greensell.member.beans.MemberVO"> <!-- 회원가입 클리어 -->
		insert into member
		values(#{email},#{password},#{name},#{nickname},#{phone},#{zipcode},#{address},
		#{bank},#{account},#{question},#{answer},0,0,0,SYSDATE)
	</insert>

	<select id="logincheck" parameterType="String" resultType="String"> <!-- 로그인 클리어 --> 
		SELECT password FROM member WHERE email=#{email}
	</select>
	
	<select id="phonechk" parameterType="String" resultType="String">
		select phone from member where phone=#{phone}
	</select>

	<select id="idcheck" parameterType="String" resultType="String"> <!-- 아이디 존재 여부 찾기  -->
		select email from member where email=#{email}
	</select>

	<select id="nickcheck" parameterType="String" resultType="String"> <!-- 닉네임 중복찾기  -->
		select nickname from member where nickname=#{nickname}
	</select>

	<select id="selectpwd" resultType="com.greensell.member.beans.MemberVO"> <!-- 비밀번호 찾기  -->
		select password from member where email=#{email} and question=#{question} and answer=#{answer}  
	</select>

	<update id="update" parameterType="com.greensell.member.beans.MemberVO"> <!-- 회원정보 업데이트 -->
		update member set password=#{password},zipcode=#{zipcode}, address=#{address}, question=#{question}, answer=#{answer}, bank=#{bank}, account=#{account} where email=#{email}
	</update>

	<delete id="delete" parameterType="String"> <!-- 회원정보 탈퇴하기 -->
		delete from member where email=#{email}
	</delete>

	<select id="bbsidcheck" parameterType="String"
		resultType="com.greensell.bbs.beans.BbsVo">  <!-- 내가 글쓴 목록 조회 -->
		select * from bbs where email=#{email} 
	</select>
	
	<select id="selectDetail" parameterType="String" resultType="com.greensell.member.beans.MemberVO"> <!-- 상세정보보기 -->
		select * from member where email=#{email}
	</select>

	
	<select id="getPost" resultType="com.greensell.member.beans.ZipVo" parameterType="String">
	SELECT sido, gugun, dong,bunji,zipcode FROM zipcode
	WHERE    sido LIKE '%'||#{address}||'%'
        OR gugun LIKE '%'||#{address}||'%'
        OR dong LIKE '%'||#{address}||'%'
        OR bunji LIKE '%'||#{address}||'%'
	</select>
	
	<select id="getquestion" resultType="String" parameterType="String">
		select question from member where email=#{email}
	</select>
	
	<select id="getanswer" resultType="String" parameterType="String">
		select answer from member where email=#{email}
	</select>
	
	<update id="updatepw" parameterType="map">
		update member set password=#{password} where email=#{email}
	</update>
	
	
</mapper>
