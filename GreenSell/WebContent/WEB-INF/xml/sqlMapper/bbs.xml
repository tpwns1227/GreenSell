<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="bbs"> 
  
	<!-- 각 게시판 별로 글 리스트 받아오기 -->
  <select id="bbsselectall" parameterType="String" resultType="com.greensell.bbs.beans.BbsVo">
   select * from bbs where bbsno=1 order by no desc
  </select>
  
	<!-- 각 게시판 별로 글 리스트 제목으로 검색하기 -->
  <select id="bbsselecttitle" parameterType="String" resultType="com.greensell.bbs.beans.BbsVo">
   select * from bbs where bbsno=1 and title like %#{title}%
  </select>
  
  <!-- 각 게시판 별로 글 리스트 내용으로 검색하기 -->
  <select id="bbsselectcontent" parameterType="String" resultType="com.greensell.bbs.beans.BbsVo">
   select * from bbs where bbsno=1 and bbscontent like %#{bbscontent}%
  </select>
  
  <!-- 게시판 상세보기 -->
  <select id="view" parameterType="com.greensell.bbs.beans.BbsVo" resultType="com.greensell.bbs.beans.BbsVo">
   select * from bbs where no=#{no}
  </select>
  
	<!-- 댓글 가져오기 -->
  <select id="cmselect" parameterType="int" resultType="com.greensell.bbs.beans.ReplyVo">
  	select * from replycomment where no=#{no}
  </select>
  
  <!-- 댓글 올리기 -->
  <insert id="cminsert" parameterType="com.greensell.bbs.beans.ReplyVo">
   insert into replycomment values(no_com_seq.nextval,#{no},#{email},sysdate,#{cmcontent})
  </insert>
  
	<!-- 댓글 지우기 -->
  <delete id="cmdelete">
  	delete from replycomment where no=#{no} 
  </delete>
  
	<!-- 조회수 올리기 로직 -->
  <update id="hitup" parameterType="com.greensell.bbs.beans.BbsVo">
  	update bbs set hits=hits+1 where no=#{no}
  </update>
	
	<!-- 게시판 글올리기 (현제 게시판별로 글올리기 불가능) -->
  <insert id="bbsinsert" parameterType="com.greensell.bbs.beans.BbsVo">
   insert into bbs values(no_bbs_seq.nextval,#{title},#{content},#{email},sysdate,0,1)
  </insert>
  
	<!-- 게시판 글수정 -->
  <update id="bbsupdate" parameterType="String">
   update bbs set title=#{title},bbscontent=#{content} where no=#{no}
  </update>
  
	<!-- 게시판 글삭제 -->
  <delete id="bbsdelete" parameterType="int">
   delete from bbs where no=#{no}
  </delete>
  
</mapper>
